# روز ۱۴: گزینه‌های پیکربندی Git for Windows

استفاده از ابزارهای خط فرمان Git for Windows قطعاً کارآمدتر از کار با ابزارهای GUI (رابط گرافیکی) است. دلیل آن این است که می‌توانید بسیاری از کارهای تکراری کنترل نسخه را از طریق دستورات خودکار کنید، یا روش‌های عملیاتی استاندارد (SOP) پیچیده را به عملیات دستوری ساده تبدیل کنید. این مقاله نکاتی را برای استفاده از ابزارهای خط فرمان Git for Windows به اشتراک می‌گذارد.

## درباره گزینه‌های پیکربندی ابزار خط فرمان Git

در ابزارهای خط فرمان Git، "گزینه‌های" (options) زیادی وجود دارد که می‌توان آن‌ها را تنظیم کرد، درست مانند زمانی که در ابزارهای GUI معمولاً بخش [Tools] -> [Preferences] را داریم تا برخی رفتارها را هنگام اجرای دستورات به دقت تنظیم کنیم. رایج‌ترین مورد، البته، زمانی است که برای اولین بار از Git for Windows استفاده می‌کنید و باید گزینه‌های `user.name` و `user.email` را تنظیم کنید. بدون تنظیم این دو گزینه، شما حتی حق اجرای `git commit` را ندارید.

برای لیست کردن تمام گزینه‌هایی که در حال حاضر در ابزارهای Git for Windows تنظیم شده‌اند، می‌توانید از دستور `git config --list` استفاده کنید.

**توجه**: از آنجایی که اکثر مقالات Git در اینترنت نحوه راه‌اندازی محیط‌های لینوکس یا مک را معرفی می‌کنند، مقاله من بر پیکربندی پلتفرم ویندوز متمرکز خواهد بود. با این حال، به جز متفاوت بودن مسیر ذخیره‌سازی، نحوه استفاده از دستورات در واقع یکسان است.

اگر می‌خواهید بررسی کنید چه "گزینه‌هایی" در دسترس هستند، می‌توانید `git help config` را در خط فرمان اجرا کنید تا مستندات کامل نمایش داده شود یا از [صفحه راهنمای git-config(1)](https://www.kernel.org/pub/software/scm/git/docs/git-config.html) بازدید کنید.

## درک سطوح پیکربندی Git (Git Configuration Levels)

گیت دارای سه سطح پیکربندی است:

۱. **System level** (`--system`): برای تمام کاربران سیستم اعمال می‌شود.
   * مکان: `C:\Program Files\Git\etc\gitconfig`
   * **نکته مهم برای ویندوز**: با فعال بودن UAC، تنظیمات ممکن است به آدرس `%LOCALAPPDATA%\VirtualStore\Program Files\Git\etc\gitconfig` هدایت شوند.
   * **توصیه**: همیشه هنگام تنظیم گزینه‌های سطح سیستم، Command Prompt را به عنوان Administrator اجرا کنید.

۲. **Global level** (`--global`): برای کاربر فعلی اعمال می‌شود.
   * مکان: `C:\Users\[username]\.gitconfig` یا `%USERPROFILE%\.gitconfig`
   * معمولاً برای `user.name` ، `user.email` و ترجیحات شخصی استفاده می‌شود.

۳. **Local level** (`--local`): فقط برای مخزن فعلی اعمال می‌شود.
   * مکان: `.git\config` در مخزن.
   * به طور خودکار زمانی که یک مخزن را مقداردهی اولیه یا Clone می‌کنید ایجاد می‌شود.

پیکربندی در سطوح پایین‌تر، سطوح بالاتر را بازنویسی (override) می‌کند (local > global > system).

## مشاهده پیکربندی

برای مشاهده تمام پیکربندی‌های فعلی:

```
git config --list
```

برای مشاهده پیکربندی از یک سطح خاص:

```
git config --global --list
git config --local --list
git config --system --list
```

## تنظیم هویت کاربر

اساسی‌ترین پیکربندی، تنظیم نام کاربری و ایمیل شماست:

```
git config --global user.name "Your Name"
git config --global user.email "your.email@example.com"
```

این تنظیمات در هر کمیتی (commit) که انجام می‌دهید استفاده می‌شوند.

## پیکربندی ویرایشگر پیش‌فرض

ویرایشگر متن مورد نظر خود را برای پیام‌های کامیت تنظیم کنید:

```
git config --global core.editor "code --wait"  # VS Code
git config --global core.editor "notepad"      # Notepad
git config --global core.editor "vim"          # Vim
```

## پیکربندی پسوند خط (Line Ending Configuration)

این مورد برای توسعه چند پلتفرمی مهم است:

```
# ویندوز (تبدیل LF به CRLF هنگام Checkout، و تبدیل CRLF به LF هنگام Commit)
git config --global core.autocrlf true

# لینوکس/مک (تبدیل CRLF به LF هنگام Commit، بدون تبدیل هنگام Checkout)
git config --global core.autocrlf input

# بدون تبدیل
git config --global core.autocrlf false
```

### مهم: UAC و VirtualStore در ویندوز

در ویندوز ویستا و نسخه‌های جدیدتر با فعال بودن کنترل حساب کاربر (UAC)، هنگام تنظیم پیکربندی در سطح سیستم، یک نکته مهم وجود دارد:

**مشکل**: فناوری VirtualStore ویندوز زمانی که فرآیندهای غیر از سرپرست (non-administrator) سعی می‌کنند در دایرکتوری‌های سیستم بنویسند، نوشتن فایل را تغییر مسیر می‌دهد. این به این معنی است که:
- تنظیمات انجام شده با Command Prompt معمولی به آدرس `%LOCALAPPDATA%\VirtualStore\Program Files\Git\etc\gitconfig` می‌روند.
- تنظیمات انجام شده با Administrator Command Prompt به آدرس `C:\Program Files\Git\etc\gitconfig` می‌روند.
- این دو مکان همگام‌سازی نمی‌شوند و باعث رفتارهای غیرمنتظره می‌شوند.

**راه حل**: هنگام تنظیم گزینه‌های سطح سیستم (`--system`)، همیشه Command Prompt را به عنوان Administrator اجرا کنید تا مطمئن شوید تنظیمات در کل سیستم اعمال می‌شوند.

برای اطلاعات بیشتر: [VirtualStore - درون کنترل حساب کاربریِ ویندوز ویستا](https://learn.microsoft.com/en-us/previous-versions/technet-magazine/cc138019(v=msdn.10))

## پیکربندی نام‌های مستعار (Aliases)

میانبرهایی برای دستورات پرکاربرد ایجاد کنید:

```
git config --global alias.co checkout
git config --global alias.br branch
git config --global alias.ci commit
git config --global alias.st status
git config --global alias.lg "log --oneline --graph --all"
```

سپس می‌توانید به جای `git checkout` از `git co` استفاده کنید و مواردی از این دست.

## خروجی رنگی

خروجی رنگی را برای خوانایی بهتر فعال کنید:

```
git config --global color.ui auto
```

## نام شاخه پیش‌فرض

نام شاخه پیش‌فرض را برای مخازن جدید تنظیم کنید:

```
git config --global init.defaultBranch main
```

## ابزارهای Merge و Diff

ابزارهای ترجیحی خود را برای ادغام و مشاهده تفاوت پیکربندی کنید:

```
git config --global merge.tool vimdiff
git config --global diff.tool vimdiff
```

## Credential Helper

اطلاعات ورود را ذخیره کنید تا از وارد کردن مکرر رمز عبور جلوگیری شود:

```
# ویندوز
git config --global credential.helper wincred

# ذخیره اطلاعات برای ۱ ساعت
git config --global credential.helper 'cache --timeout=3600'
```

## رفتار Push

رفتار پیش‌فرض Push را پیکربندی کنید:

```
# فقط شاخه فعلی را Push کن
git config --global push.default simple

# تمام شاخه‌های منطبق را Push کن
git config --global push.default matching
```

## حذف پیکربندی (Unset Configuration)

برای حذف یک پیکربندی:

```
git config --global --unset user.name
git config --global --unset-all user.email
```

## ویرایش مستقیم فایل‌های پیکربندی

همچنین می‌توانید فایل‌های پیکربندی را مستقیماً ویرایش کنید:

```
git config --global --edit
git config --local --edit
```

## خلاصه امروز

درک و پیکربندی صحیح Git برای یک گردش کار روان ضروری است. سیستم پیکربندی منعطف و قدرتمند است و به شما امکان می‌دهد Git را مطابق با ترجیحات و محیط کاری خود سفارشی کنید.

اجازه دهید دستورات گیت و پارامترهای یاد گرفته شده امروز را دوباره سازماندهی کنم:

* git config --list
* git config --global user.name
* git config --global user.email
* git config --global core.editor
* git config --global core.autocrlf
* git config --global alias.*
* git config --global --edit
* git config --global --unset

---

* [بازگشت به فهرست مطالب](README.md)
* [روز قبل: ذخیره‌سازی تغییرات در دایرکتوری کاری و ایندکس (Stash)](13.md)
* [روز بعد: تگ‌ها - علامت‌گذاری رویدادهای مهم در کنترل نسخه](15.md)

---
