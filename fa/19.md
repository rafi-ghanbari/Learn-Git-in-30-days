# روز ۱۹: تنظیم لیست نادیده گرفتن .gitignore

هنگام توسعه یک پروژه، ممکن است مکرراً فایل‌های جدیدی در دایرکتوری کاری ظاهر شوند (مانند فایل‌های موقت یا فایل‌های کش تولید شده توسط ابزارهای توسعه مانند Visual Studio). بسیاری از این فایل‌ها نیازی به گنجانده شدن در کنترل نسخه ندارند و باید حذف شوند. ما به این کار "لیست نادیده گرفتن" (ignore list) می‌گوییم.

## درک .gitignore

یک فایل `.gitignore` فایل‌های ردیابی نشده‌ای (untracked) را مشخص می‌کند که گیت باید عمداً از آن‌ها چشم‌پوشی کند. در Git، فایل `.gitignore` برای تعریف "لیست نادیده گرفتن" استفاده می‌شود. هدف اصلی، خارج کردن فایل‌هایی است که نیازی به اضافه شدن به کنترل نسخه ندارند. فایل‌ها یا مسیرهایی (که می‌توانند شامل کاراکترهای عمومی یا wildcard باشند) که در این فایل لیست شده‌اند در نتایج `git status` ظاهر نمی‌شوند و طبیعتاً هنگام اجرای `git add` نیز اضافه نخواهند شد.

با این حال، این مورد فقط برای `Untracked files` صدق می‌کند. فایل‌هایی که قبلاً توسط Git ردیابی شده‌اند (`Staged files`) تحت تأثیر فایل `.gitignore` قرار نمی‌گیرند.

## ایجاد .gitignore از طریق GitHub

اگر تا به حال پروژه‌ای در GitHub ایجاد کرده باشید، ممکن است از این ویژگی استفاده کرده باشید. هنگام ایجاد یک مخزن جدید، می‌توانید یک لیست نادیده گرفتن از پیش تعریف شده را انتخاب کنید که GitHub به شما در تنظیم آن کمک می‌کند. این لیست نادیده گرفتن در واقع فقط فایلی به نام `.gitignore` است که به طور پیش‌فرض در دایرکتوری ریشه پروژه قرار می‌گیرد.

شما می‌توانید از قالب‌های مختلفی انتخاب کنید، مانند:
- Node
- Python
- Java
- C#
- Visual Studio
- و بسیاری موارد دیگر

## ایجاد دستی .gitignore

به سادگی فایلی به نام `.gitignore` در ریشه مخزن خود ایجاد کنید:

```
# در ویندوز
echo node_modules/ > .gitignore

# در لینوکس/مک
echo "node_modules/" > .gitignore
```

یا آن را به صورت دستی با یک ویرایشگر متن ایجاد کنید.

## الگوهای پایه (Basic Patterns)

### نادیده گرفتن فایل‌های خاص

```
config.local.js
secrets.txt
```

### نادیده گرفتن فایل‌هایی با پسوندهای خاص

```
*.log
*.tmp
*.cache
```

### نادیده گرفتن دایرکتوری‌ها

```
node_modules/
dist/
build/
```

به اسلشِ انتهایی برای نشان دادن دایرکتوری توجه کنید.

### نادیده گرفتن فایل‌ها در هر دایرکتوری

```
# نادیده گرفتن تمام فایل‌های .log در هر دایرکتوری
**/*.log
```

## الگوهای پیشرفته (Advanced Patterns)

### نفی یا استثنا (Negation)

از نماد `!` برای ایجاد استثنا استفاده کنید:

```
# نادیده گرفتن تمام فایل‌های .log
*.log

# اما این فایل خاص را نادیده نگیر
!important.log
```

### نادیده گرفتن فایل‌ها فقط در دایرکتوری خاص

```
# نادیده گرفتن فایل test.txt فقط در دایرکتوری ریشه
/test.txt

# نادیده گرفتن test.txt در هر زیردایرکتوری، بجز ریشه
*/test.txt
```

### پسوندهای متعدد

```
# نادیده گرفتن چندین نوع فایل
*.{jpg,png,gif}
```

## الگوهای رایج .gitignore

### پروژه‌های Node.js

```
node_modules/
npm-debug.log
.env
.DS_Store
dist/
build/
```

### پروژه‌های Python

```
__pycache__/
*.py[cod]
*$py.class
.venv/
venv/
*.egg-info/
.pytest_cache/
```

### پروژه‌های Java

```
*.class
*.jar
*.war
target/
.gradle/
build/
```

### پروژه‌های .NET

```
bin/
obj/
*.user
*.suo
packages/
.vs/
```

## .gitignore جهانی (Global)

برای الگوهایی که می‌خواهید در تمام مخازن نادیده بگیرید:

```
git config --global core.excludesfile ~/.gitignore_global
```

سپس فایل `~/.gitignore_global` را با الگوهای خود ایجاد کنید.

## نادیده گرفتن فایل‌هایی که قبلاً ردیابی شده‌اند

اگر به اشتباه فایل‌هایی را Commit کرده‌اید که باید نادیده گرفته شوند:

```
# حذف از گیت اما نگه داشتن خودِ فایل
git rm --cached filename

# حذف دایرکتوری از گیت اما نگه داشتن آن
git rm -r --cached directory/
```

سپس الگو را به `.gitignore` اضافه کرده و Commit کنید.

## مشاهده فایل‌های نادیده گرفته شده

برای اینکه ببینید کدام فایل‌ها نادیده گرفته می‌شوند:

```
git status --ignored
```

## بررسی دلیل نادیده گرفته شدن یک فایل

برای اینکه ببینید کدام الگو باعث نادیده گرفته شدن یک فایل می‌شود:

```
git check-ignore -v filename
```

## قالب‌های فایل .gitignore

گیت‌هاب قالب‌های فایل .gitignore را برای زبان‌ها و فریم‌ورک‌های مختلف ارائه می‌دهد:

* https://github.com/github/gitignore

## توضیحات (Comments) در .gitignore

از `#` برای توضیحات استفاده کنید:

```
# این یک توضیح است
*.log  # توضیح در ادامه خط
```

## بهترین تجربه‌ها (Best Practices)

۱. **.gitignore را زود Commit کنید**: آن را در ابتدای پروژه خود اضافه کنید.
۲. **دقیق باشید**: از الگوهای بیش از حد کلی اجتناب کنید.
۳. **دلیل را مستند کنید**: از توضیحات برای توضیح الگوهای غیربدیهی استفاده کنید.
۴. **سازماندهی شده نگه دارید**: الگوهای مرتبط را با هم دسته‌بندی کنید.
۵. **از قالب‌ها استفاده کنید**: با قالب‌های مخصوص هر زبان شروع کنید.
۶. **تغییرات محلی**: از `.git/info/exclude` برای الگوهای شخصی استفاده کنید.

## .gitignore در زیردایرکتوری

شما می‌توانید فایل‌های `.gitignore` را در زیردایرکتوری‌ها داشته باشید. الگوها نسبت به مکانِ فایل `.gitignore` هستند.

## خلاصه امروز

فایل `.gitignore` برای تمیز نگه داشتن مخزن شما و جلوگیری از Commit کردن تصادفی فایل‌هایی که به کنترل نسخه تعلق ندارند، ضروری است. درک نحوه نگارش الگوها و بهترین تجربه‌ها به شما در حفظ یک مخزن تمیز و حرفه‌ای کمک می‌کند.

اجازه دهید دستورات گیت و پارامترهای یاد گرفته شده امروز را دوباره سازماندهی کنم:

* git rm --cached
* git rm -r --cached
* git status --ignored
* git check-ignore
* git config core.excludesfile

## لینک‌های مرجع

* [Git Documentation - gitignore](https://git-scm.com/docs/gitignore)
* [GitHub gitignore templates](https://github.com/github/gitignore)

---

* [بازگشت به فهرست مطالب](README.md)
* [روز قبل: اصلاح تاریخچه نسخه‌های ثبت شده - بخش ۱ (reset و amend)](18.md)
* [روز بعد: اصلاح تاریخچه نسخه‌های ثبت شده - بخش ۲ (revert)](20.md)

---
