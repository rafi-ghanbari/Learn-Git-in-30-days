# روز ۰۳: ایجاد یک مخزن (Repository)

برای شروع استفاده از Git، مهم‌ترین چیز این است که ابتدا یک مخزن (repository) داشته باشید. اما این مخزن از کجا می‌آید؟ این مقاله روش‌های مختلف ایجاد یک مخزن را معرفی می‌کند.

برای ایجاد یک مخزن، در واقع گزینه‌های زیادی دارید، به عنوان مثال:

* ایجاد یک مخزن محلی (local repository) در سیستم خودتان
* ایجاد یک مخزن مشترک (shared repository) در سیستم خودتان
* ایجاد یک مخزن راه دور (remote repository) در GitHub یا سایر پلتفرم‌های Git

در هر صورت، شما همیشه به یک مخزن نیاز دارید. ما هر کدام را به شرح زیر توضیح خواهیم داد:

## ایجاد یک مخزن محلی در سیستم خودتان

بیایید ابتدا ابزار Git Shell مربوط به [GitHub for Windows](https://windows.github.com/) را باز کنیم. این ابزار در واقع یک رابط ویندوز PowerShell است اما با برخی متغیرهای محیطی مرتبط با Git و تنظیمات خط فرمان:

![image](figures/03/01.png)

پس از باز شدن، به طور پیش‌فرض در پوشه `%USERPROFILE%\Documents\GitHub` قرار می‌گیرد. این دایرکتوری ریشه پروژه پیش‌فرض [GitHub for Windows](https://windows.github.com/) است، به این معنی که تمام پروژه‌های Clone شده از گیت‌هاب از طریق [GitHub for Windows](https://windows.github.com/) به طور پیش‌فرض در این دایرکتوری قرار می‌گیرند.

بنابراین ما می‌توانیم مستقیماً یک دایرکتوری جدید در اینجا ایجاد کنیم تا به عنوان "دایرکتوری کاری" (working directory) ما عمل کند. می‌توانیم دستور `mkdir git-demo` را برای ایجاد دایرکتوری وارد کنیم و سپس از `cd git-demo` برای ورود به آن دایرکتوری استفاده کنیم.

از آنجایی که این یک دایرکتوری خالی است و شامل هیچ مخزن گیت نیست، می‌توانیم از دستور `git init` برای ایجاد مخزن استفاده کنیم. به طور پیش‌فرض، مخزن در دایرکتوری `.git` تحت دایرکتوری کاری قرار می‌گیرد.

مراحل کامل عملیات در شکل زیر نشان داده شده است:

![image](figures/03/02.png)

پس از ایجاد، باید متوجه چیز متفاوتی در خط فرمان Git Shell شوید - یک عبارت برجسته `[master]` بعد از مسیر فعلی اضافه می‌شود. این پیام حالت‌های مختلف `working directory` فعلی شما را نشان می‌دهد. اگر بتوانید آن را درک کنید، منبع اطلاعاتی بسیار مفیدی است که می‌تواند به شما کمک کند تا هنگام استفاده از ابزارهای خط فرمان برای کار با Git، از تایپ بسیاری از دستورات `git status` برای استعلام وضعیت فعلی دایرکتوری کاری اجتناب کنید. این بخش به طور ویژه در مقاله بعدی توضیح داده خواهد شد.

## ایجاد یک مخزن مشترک در سیستم خودتان

مخزن مشترک (shared repository) به ایجاد یک مخزن Git بدون دایرکتوری کاری اشاره دارد. این وضعیت در سیستم‌عامل‌های لینوکس رایج‌تر است زیرا سیستم‌عامل‌های لینوکس معمولاً توسط چندین نفر در یک هاست لینوکس استفاده می‌شوند. اگرچه این کار را می‌توان در سیستم‌عامل‌های ویندوز نیز انجام داد، اما محیط توسعه ما بیشتر در محیط کلاینت ویندوز است و به ندرت پیش می‌آید که چندین نفر از یک کامپیوتر به صورت مشترک استفاده کنند.

برای ایجاد یک مخزن مشترک، می‌توانید از دستور `git init --bare` برای ایجاد آن استفاده کنید، همانطور که در شکل زیر نشان داده شده است. می‌بینید که وقتی `git init` با پارامتر `--bare` استفاده می‌شود، تمام فایل‌ها و پوشه‌های مرتبط با مخزن گیت را در دایرکتوری فعلی ایجاد می‌کند. باید توجه ویژه داشته باشید که این پوشه نمی‌تواند مستقیماً برای اهداف توسعه استفاده شود. فقط می‌تواند برای ذخیره اطلاعات مرتبط با Git استفاده شود. در بیشتر موارد، شما نباید هیچ فایلی را در این پوشه به صورت دستی ویرایش کنید. بهتر است از طریق دستورات git کار کنید.

![image](figures/03/03.png)

از آنجایی که این یک "مخزن خالص بدون دایرکتوری کاری" است، مخزن مشترک یک نام مستعار به نام "bare repository" نیز دارد.

باید دوباره تأکید کنم که Git "کنترل نسخه توزیع شده" است و همه یک مخزن کامل دارند. یعنی زمانی که می‌خواهید یک "دایرکتوری کاری" ایجاد کنید، ابتدا باید محتوای این "bare repository" را برگردانید. در این زمان، باید از دستور `git clone [REPO_URI]` برای "شبیه‌سازی" (cloning) یک نسخه استفاده کنید. در طول فرآیند `git clone` نه تنها یک دایرکتوری کاری به طور خودکار ایجاد می‌شود، بلکه این "bare repository" نیز به طور کامل شبیه‌سازی می‌شود. این فرآیند شبیه‌سازی مانند یک "پشتیبان کامل" است که تمام سوابق نسخه در مخزن گیت، تمام نسخه‌های فایل‌ها و غیره، همه داده‌ها را به طور کامل کپی می‌کند. فرآیند کامل دستورات را می‌توان در شکل زیر مشاهده کرد:

![image](figures/03/04.png)

در عمل، ممکن است چندین راه برای استفاده از "shared repository" یا "bare repository" وجود داشته باشد:

* توسعه مشترک روی ماشینی که توسط چندین نفر استفاده می‌شود، جایی که به اکثر افراد می‌توان اجازه دسترسی فقط خواندنی (read-only) به این "پوشه مخزن bare" داد و فقط یک نفر یا چند نفر اجازه نوشتن داشته باشند.
* برخی افراد مخازن bare را در Dropbox قرار می‌دهند تا این مخزن bare را با چندین کامپیوتر خود همگام‌سازی کنند.

لطفاً توجه داشته باشید: اگرچه دایرکتوری `.git` تحت "دایرکتوری کاری" نیز یک "مخزن" است، اما مخزن تحت دایرکتوری کاری حاوی برخی اطلاعات ایندکس (index) دایرکتوری کاری نیز هست که اطلاعات وضعیت دایرکتوری کاری را ذخیره می‌کند. این اطلاعات وضعیت در "مخزن مشترک" ظاهر نمی‌شود، که فقط حاوی اطلاعات نسخه (یعنی اطلاعات شیء گیت) است.

## ایجاد یک مخزن راه دور در GitHub یا سایر پلتفرم‌های Git

در واقع، "مخزن راه دور" (remote repository) و "مخزن مشترک" (shared repository) تقریباً یکسان هستند. تفاوت فقط در این است که "مخزن مشترک" بیشتر از دسترسی مستقیم به فایل استفاده می‌کند، در حالی که "مخزن راه دور" معمولاً از پروتکل‌هایی مانند SSH، پروتکل Git، HTTP و غیره برای دسترسی "از راه دور" به مخزن گیت استفاده می‌کند. سایر روش‌های استفاده اساساً یکسان هستند.

در ادامه ایجاد یک مخزن از طریق GitHub و شبیه‌سازی مخزن به صورت محلی نمایش داده می‌شود:

* ابتدا وارد GitHub شوید، سپس یک مخزن جدید ایجاد کنید.

![image](figures/03/05.png)

* اطلاعات مربوط به پروژه گیت‌هاب را تنظیم کرده و مخزن را ایجاد کنید.

![image](figures/03/06.png)

* پس از ایجاد، به شما در مورد نحوه دریافت پروژه یا وارد کردن پروژه محلی موجود خود به GitHub راهنمایی می‌کند.

![image](figures/03/07.png)

* همانطور که در بالا نشان داده شد، می‌توانیم در بخش Quick setup روی "Set up in Desktop" کلیک کنیم. کامپیوتر شما به طور خودکار ابزار GitHub for Windows را باز کرده و به طور خودکار این مخزن را Clone کرده و یک دایرکتوری کاری ایجاد می‌کند.

* همچنین می‌توانید URL مخزن راه دور Git را کپی کنید، سپس دستور `git clone [REPO_URL]` را برای شبیه‌سازی یک نسخه اجرا کنید.

![image](figures/03/08.png)

## خلاصه امروز

موارد فوق سه راه برای ایجاد یک مخزن گیت هستند. اجازه دهید دستورات گیت و پارامترهای یاد گرفته شده امروز را دوباره سازماندهی کنم:

* git init
* git init --bare
* git clone [REPOSITORY_URI]

## لینک‌های مرجع

* [Git for Windows](https://msysgit.github.io/)
* [GitHub for Windows](https://windows.github.com/)

---

* [بازگشت به فهرست مطالب](README.md)
* [روز قبل: سه ابزار ضروری Git برای پلتفرم ویندوز](02.md)
* [روز بعد: دستورات رایج کنترل نسخه Git](04.md)

---
